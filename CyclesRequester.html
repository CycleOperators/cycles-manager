<!DOCTYPE html>
<html><head title="Doc"><meta charset="UTF-8"/><link href="styles.css" rel="stylesheet"/></head><body><nav class="sidebar"><h3>Modules</h3><ul><li><li><a href="CyclesManager.html">CyclesManager</a></li></li><li><li><a href="CyclesRequester.html">CyclesRequester</a></li></li><li><li><a href="InterfaceSpec.html">InterfaceSpec</a></li></li><li><li><a href="Internal.html">Internal</a></li></li><li><li><a href="SendCycles.html">SendCycles</a></li></li></ul><h3>Declarations</h3><ul><li><li><a href="#type.Cycles">Cycles</a></li></li><li><li><a href="#type.TopupRule">TopupRule</a></li></li><li><li><a href="#type.CyclesRequester">CyclesRequester</a></li></li><li><li><a href="#init">init</a></li></li><li><li><a href="#setTopupRule">setTopupRule</a></li></li><li><li><a href="#isBelowCyclesThreshold">isBelowCyclesThreshold</a></li></li><li><li><a href="#requestTopupIfBelowThreshold">requestTopupIfBelowThreshold</a></li></li><li><li><a href="#requestCyclesAmount">requestCyclesAmount</a></li></li></ul></nav><div class="documentation"><h1>CyclesRequester</h1><p>The CyclesRequester module is meant to be used by canisters that need to request cycles from a battery canister that implements the CyclesManager interface.</p>
<div class="declaration"><h4 class="type-declaration" id="type.Cycles"><span class="keyword">type </span><span class="type">Cycles</span> = <span class="type">Nat</span></h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.TopupRule"><span class="keyword">type </span><span class="type">TopupRule</span> = { threshold : <a href="#type.Cycles"><span class="type">Cycles</span></a>; method : {#to_balance : <a href="#type.Cycles"><span class="type">Cycles</span></a>; #by_amount : <a href="#type.Cycles"><span class="type">Cycles</span></a>} }</h4><p><p>For resources on choosing a good topup rule, check out https://www.notion.so/cycleops/Best-Practices-for-Top-up-Rules-e3e9458ec96f46129533f58016f66f6e</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.CyclesRequester"><span class="keyword">type </span><span class="type">CyclesRequester</span> = { batteryCanisterPrincipal : <span class="type">Principal</span>; <span class="keyword">var </span>topupRule : <a href="#type.TopupRule"><span class="type">TopupRule</span></a> }</h4><p><p>The cycles requester type, containing the principal of the &quot;battery canister&quot;, or the canister
From which cycles are requested, and a topup rule.</p>
</p></div><div class="declaration"><h4 class="function" id="init"><code><span class="keyword">public func </span><span class="fnname">init</span>() : <a href="#type.CyclesRequester"><span class="type">CyclesRequester</span></a></code></h4><p><p>Initialize a cycles requester.</p>
</p></div><div class="declaration"><h4 class="function" id="setTopupRule"><code><span class="keyword">public func </span><span class="fnname">setTopupRule</span>(<span class="parameter">cyclesRequester</span> : <a href="#type.CyclesRequester"><span class="type">CyclesRequester</span></a>, <span class="parameter">topupRule</span> : <a href="#type.TopupRule"><span class="type">TopupRule</span></a>)</code></h4><p><p>Sets the topup rule for a cycles requester.</p>
</p></div><div class="declaration"><h4 class="function" id="isBelowCyclesThreshold"><code><span class="keyword">public func </span><span class="fnname">isBelowCyclesThreshold</span>(<span class="parameter">cyclesRequester</span> : <a href="#type.CyclesRequester"><span class="type">CyclesRequester</span></a>) : <span class="type">Bool</span></code></h4><p><p>Returns a boolean representing if the canister is below its set cycles threshold.</p>
</p></div><div class="declaration"><h4 class="function" id="requestTopupIfBelowThreshold"><code><span class="keyword">public func </span><span class="fnname">requestTopupIfBelowThreshold</span>(<span class="parameter">cyclesRequester</span> : <a href="#type.CyclesRequester"><span class="type">CyclesRequester</span></a>) : <span class="keyword">async* </span><a href="CyclesManager.html#type.TransferCyclesResult"><span class="type">CyclesManager.TransferCyclesResult</span></a></code></h4><p><p>Requests a topup according to the set topup rule if the canister is below its cycles threshold.</p>
</p></div><div class="declaration"><h4 class="function" id="requestCyclesAmount"><code><span class="keyword">public func </span><span class="fnname">requestCyclesAmount</span>(<span class="parameter">cyclesRequester</span> : <a href="#type.CyclesRequester"><span class="type">CyclesRequester</span></a>, <span class="parameter">amount</span> : <span class="type">Nat</span>) : <span class="keyword">async </span><a href="CyclesManager.html#type.TransferCyclesResult"><span class="type">CyclesManager.TransferCyclesResult</span></a></code></h4><p><p>Requests a specific amount of cycles from the battery canister.</p>
</p></div></div></body></html>